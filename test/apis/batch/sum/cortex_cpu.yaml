# this API is only meant to run with 1-worker jobs

- name: sum
  kind: BatchAPI
  pod:
    containers:
    - name: api
      image: 499593605069.dkr.ecr.us-west-2.amazonaws.com/cortexlabs-tests/batch-sum-cpu:latest
      command:
        - "gunicorn"
        - "-k"
        - "uvicorn.workers.UvicornWorker"
        - "--workers"
        - "1"
        - "--threads"
        - "1"
        - "--bind"
        - ":$CORTEX_PORT"
        - "main:app"
      compute:
        cpu: 200m
        mem: 256Mi
