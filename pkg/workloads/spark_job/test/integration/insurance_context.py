# Copyright 2019 Cortex Labs, Inc.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

import consts

"""
HOW TO GENERATE CONTEXT

1. cx deploy
2. get a path to a context
3. ssh into a docker container (spark or tf_train)
docker run -it --entrypoint "/bin/bash" cortexlabs/spark
4. run the following in python3 shell

from lib import util
from lib.storage import S3

S3(bucket, client_config={}).get_msgpack(key)

bucket, key = S3.deconstruct_s3_path('s3://<cortex-bucket>/apps/<app-name>/contexts/<context-id>.msgpack')

5. udpate path of any implementations being used to /<impl_type>/<impl> e.g. /transformers/normalize.py
6. delete images in cortex_config
"""


def get(input_data_path):
    raw_ctx["environment_data"]["csv_data"]["path"] = input_data_path
    raw_ctx["cortex_config"]["api_version"] = consts.CORTEX_VERSION

    return raw_ctx


raw_ctx = {
    "constants": {},
    "root": "apps/insurance/data/2019-06-12-19-22-55-936375/483b4537be2db30b81be4809ab0c787f65230540b9b6779af7420922d654011",
    "key": "apps/insurance/contexts/58feed5c3620ce81e3cb18ba0268078b28f102a70aa55cb8d30fa29a0d0f323.msgpack",
    "estimators": {
        "c5e53f81d6d57bd1b46ed04020509401b139864d483c35e781338f11b2cc301": {
            "target_column": None,
            "id": "be000f367fb9cd7167d4eb9bebc6469d7fd839fc55adb3cb6ff7e34e33335e6",
            "index": 0,
            "resource_type": "estimator",
            "namespace": None,
            "input": None,
            "embed": None,
            "impl_key": "estimators/c5e53f81d6d57bd1b46ed04020509401b139864d483c35e781338f11b2cc301.py",
            "path": "implementations/models/dnn.py",
            "hparams": None,
            "prediction_key": "",
            "file_path": "",
            "name": "c5e53f81d6d57bd1b46ed04020509401b139864d483c35e781338f11b2cc301",
            "training_input": None,
        }
    },
    "transformed_columns": {
        "charges_normalized": {
            "index": 10,
            "type": "FLOAT_COLUMN",
            "tags": {},
            "resource_type": "transformed_column",
            "transformer_path": None,
            "input": {
                "col": "\U0001f31d\U0001f31d\U0001f31d\U0001f31d\U0001f31dcharges",
                "stddev": "\U0001f31d\U0001f31d\U0001f31d\U0001f31d\U0001f31dcharges_stddev",
                "mean": "\U0001f31d\U0001f31d\U0001f31d\U0001f31d\U0001f31dcharges_mean",
            },
            "embed": None,
            "workload_id": "cs7eodcfv22u5ztm2l8g",
            "name": "charges_normalized",
            "transformer": "cortex.normalize",
            "file_path": "resources/features.yaml",
            "id": "a91d01f7a9a260d094fa90d3f6a1e77372f5c271d633ac129637f2eb6196d7e",
            "compute": {
                "driver_mem_overhead": None,
                "executors": 1,
                "executor_mem": '{"Quantity":"500Mi","UserString":"500Mi"}',
                "driver_cpu": '{"Quantity":"1","UserString":"1"}',
                "mem_overhead_factor": None,
                "executor_mem_overhead": None,
                "driver_mem": '{"Quantity":"500Mi","UserString":"500Mi"}',
                "executor_cpu": '{"Quantity":"1","UserString":"1"}',
            },
        }
    },
    "id": "58feed5c3620ce81e3cb18ba0268078b28f102a70aa55cb8d30fa29a0d0f323",
    "environment_data": {
        "csv_data": {
            "schema": [
                "\U0001f31d\U0001f31d\U0001f31d\U0001f31d\U0001f31dage",
                "\U0001f31d\U0001f31d\U0001f31d\U0001f31d\U0001f31dsex",
                "\U0001f31d\U0001f31d\U0001f31d\U0001f31d\U0001f31dbmi",
                "\U0001f31d\U0001f31d\U0001f31d\U0001f31d\U0001f31dchildren",
                "\U0001f31d\U0001f31d\U0001f31d\U0001f31d\U0001f31dsmoker",
                "\U0001f31d\U0001f31d\U0001f31d\U0001f31d\U0001f31dregion",
                "\U0001f31d\U0001f31d\U0001f31d\U0001f31d\U0001f31dcharges",
            ],
            "csv_config": {
                "ignore_trailing_white_space": None,
                "null_value": None,
                "positive_inf": None,
                "escape": None,
                "ignore_leading_white_space": None,
                "header": None,
                "negative_inf": None,
                "max_chars_per_column": None,
                "char_to_escape_quote_escaping": None,
                "nan_value": None,
                "encoding": None,
                "multiline": None,
                "quote": None,
                "comment": None,
                "sep": None,
                "max_columns": None,
                "empty_value": None,
            },
            "type": "csv",
            "path": "s3a://cortex-examples/insurance.csv",
            "drop_null": False,
        },
        "parquet_data": None,
    },
    "apis": {
        "cost": {
            "model_name": "dnn",
            "index": 0,
            "tags": {},
            "resource_type": "api",
            "embed": None,
            "workload_id": "zixo1slsqroa3dheq2mg",
            "path": "/insurance/cost",
            "name": "cost",
            "model": "\U0001f31d\U0001f31d\U0001f31d\U0001f31d\U0001f31ddnn",
            "file_path": "resources/apis.yaml",
            "id": "a5341babd551a85d82b7b49e488983113e97eb6a0c4c8643986a92a3c44ec32",
            "compute": {"gpu": 0, "cpu": None, "replicas": 1, "mem": None},
        }
    },
    "cortex_config": {
        "enable_telemetry": False,
        "id": "da5e65b994ba4ebb069bdc19cf73da64aee79e5d83f466038dc75b3ef04fa63",
        "operator_in_cluster": False,
        "log_group": "cortex",
        "namespace": "cortex",
        "region": "us-west-2",
        "api_version": "master",
    },
    "metadata_root": "apps/insurance/data/2019-06-12-19-22-55-936375/483b4537be2db30b81be4809ab0c787f65230540b9b6779af7420922d654011/metadata",
    "raw_columns": {
        "raw_string_columns": {
            "smoker": {
                "index": 4,
                "required": True,
                "tags": {},
                "type": "STRING_COLUMN",
                "embed": None,
                "workload_id": "cs7eodcfv22u5ztm2l8g",
                "name": "smoker",
                "file_path": "resources/features.yaml",
                "id": "3625e8890ecad8d2f64382dac7a06b7546b21eeba32de894265fbb95e8c2140",
                "values": ["yes", "no"],
                "compute": {
                    "driver_mem_overhead": None,
                    "executors": 1,
                    "executor_mem": '{"Quantity":"500Mi","UserString":"500Mi"}',
                    "driver_cpu": '{"Quantity":"1","UserString":"1"}',
                    "mem_overhead_factor": None,
                    "executor_mem_overhead": None,
                    "driver_mem": '{"Quantity":"500Mi","UserString":"500Mi"}',
                    "executor_cpu": '{"Quantity":"1","UserString":"1"}',
                },
                "resource_type": "raw_column",
            },
            "sex": {
                "index": 1,
                "required": True,
                "tags": {},
                "type": "STRING_COLUMN",
                "embed": None,
                "workload_id": "cs7eodcfv22u5ztm2l8g",
                "name": "sex",
                "file_path": "resources/features.yaml",
                "id": "fe94653b7cc3ea3d6cdee9e42b0feab7ad8f1a5b7d2bd4f9f6860c1b3ce5071",
                "values": ["female", "male"],
                "compute": {
                    "driver_mem_overhead": None,
                    "executors": 1,
                    "executor_mem": '{"Quantity":"500Mi","UserString":"500Mi"}',
                    "driver_cpu": '{"Quantity":"1","UserString":"1"}',
                    "mem_overhead_factor": None,
                    "executor_mem_overhead": None,
                    "driver_mem": '{"Quantity":"500Mi","UserString":"500Mi"}',
                    "executor_cpu": '{"Quantity":"1","UserString":"1"}',
                },
                "resource_type": "raw_column",
            },
            "region": {
                "index": 5,
                "required": True,
                "tags": {},
                "type": "STRING_COLUMN",
                "embed": None,
                "workload_id": "cs7eodcfv22u5ztm2l8g",
                "name": "region",
                "file_path": "resources/features.yaml",
                "id": "a51c74f814e6a28891b6677698fc5129794c8bf60d90741ac2e51d5a112e024",
                "values": ["northwest", "northeast", "southwest", "southeast"],
                "compute": {
                    "driver_mem_overhead": None,
                    "executors": 1,
                    "executor_mem": '{"Quantity":"500Mi","UserString":"500Mi"}',
                    "driver_cpu": '{"Quantity":"1","UserString":"1"}',
                    "mem_overhead_factor": None,
                    "executor_mem_overhead": None,
                    "driver_mem": '{"Quantity":"500Mi","UserString":"500Mi"}',
                    "executor_cpu": '{"Quantity":"1","UserString":"1"}',
                },
                "resource_type": "raw_column",
            },
        },
        "raw_float_columns": {
            "bmi": {
                "index": 2,
                "resource_type": "raw_column",
                "tags": {},
                "required": True,
                "embed": None,
                "workload_id": "cs7eodcfv22u5ztm2l8g",
                "max": 60.0,
                "name": "bmi",
                "min": 0.0,
                "file_path": "resources/features.yaml",
                "id": "05734a3de0cc2a28050b811241eb27c59634c9a175382fc0c0d8ceeb0840036",
                "values": None,
                "compute": {
                    "driver_mem_overhead": None,
                    "executors": 1,
                    "executor_mem": '{"Quantity":"500Mi","UserString":"500Mi"}',
                    "driver_cpu": '{"Quantity":"1","UserString":"1"}',
                    "mem_overhead_factor": None,
                    "executor_mem_overhead": None,
                    "driver_mem": '{"Quantity":"500Mi","UserString":"500Mi"}',
                    "executor_cpu": '{"Quantity":"1","UserString":"1"}',
                },
                "type": "FLOAT_COLUMN",
            },
            "charges": {
                "index": 6,
                "resource_type": "raw_column",
                "tags": {},
                "required": True,
                "embed": None,
                "workload_id": "cs7eodcfv22u5ztm2l8g",
                "max": 100000.0,
                "name": "charges",
                "min": 0.0,
                "file_path": "resources/features.yaml",
                "id": "9e8a5917e4a8c803af17ad0792b89201b1784415bfeb7801ca0308c1a8f6090",
                "values": None,
                "compute": {
                    "driver_mem_overhead": None,
                    "executors": 1,
                    "executor_mem": '{"Quantity":"500Mi","UserString":"500Mi"}',
                    "driver_cpu": '{"Quantity":"1","UserString":"1"}',
                    "mem_overhead_factor": None,
                    "executor_mem_overhead": None,
                    "driver_mem": '{"Quantity":"500Mi","UserString":"500Mi"}',
                    "executor_cpu": '{"Quantity":"1","UserString":"1"}',
                },
                "type": "FLOAT_COLUMN",
            },
        },
        "raw_int_columns": {
            "age": {
                "index": 0,
                "resource_type": "raw_column",
                "tags": {},
                "required": True,
                "embed": None,
                "workload_id": "cs7eodcfv22u5ztm2l8g",
                "max": 100,
                "name": "age",
                "min": 0,
                "file_path": "resources/features.yaml",
                "id": "2957b75e2f53e5c74f6036022ef1681d1c6444e1c8a7ca424813f642463f503",
                "values": None,
                "compute": {
                    "driver_mem_overhead": None,
                    "executors": 1,
                    "executor_mem": '{"Quantity":"500Mi","UserString":"500Mi"}',
                    "driver_cpu": '{"Quantity":"1","UserString":"1"}',
                    "mem_overhead_factor": None,
                    "executor_mem_overhead": None,
                    "driver_mem": '{"Quantity":"500Mi","UserString":"500Mi"}',
                    "executor_cpu": '{"Quantity":"1","UserString":"1"}',
                },
                "type": "INT_COLUMN",
            },
            "children": {
                "index": 3,
                "resource_type": "raw_column",
                "tags": {},
                "required": True,
                "embed": None,
                "workload_id": "cs7eodcfv22u5ztm2l8g",
                "max": 10,
                "name": "children",
                "min": 0,
                "file_path": "resources/features.yaml",
                "id": "a782d9ba0db596ad7c3e1a46be4dcd5a0c24e626e8ee308e941e33de04149bc",
                "values": None,
                "compute": {
                    "driver_mem_overhead": None,
                    "executors": 1,
                    "executor_mem": '{"Quantity":"500Mi","UserString":"500Mi"}',
                    "driver_cpu": '{"Quantity":"1","UserString":"1"}',
                    "mem_overhead_factor": None,
                    "executor_mem_overhead": None,
                    "driver_mem": '{"Quantity":"500Mi","UserString":"500Mi"}',
                    "executor_cpu": '{"Quantity":"1","UserString":"1"}',
                },
                "type": "INT_COLUMN",
            },
        },
        "raw_inferred_columns": {},
    },
    "python_packages": {},
    "status_prefix": "apps/insurance/resource_statuses",
    "aggregators": {
        "cortex.mean": {
            "input": {
                "_type": "FLOAT_COLUMN|INT_COLUMN",
                "_min_count": None,
                "_optional": False,
                "_allow_null": False,
                "_default": None,
                "_max_count": None,
            },
            "file_path": "/home/ubuntu/src/github.com/cortexlabs/cortex/pkg/aggregators/aggregators.yaml",
            "impl_key": "aggregators/71c8aa1ce07d9d7059e305ed2b180504c36a41452e73fb251ef532bf679f851.py",
            "path": "spark/mean.py",
            "name": "mean",
            "index": 13,
            "embed": None,
            "output_type": "FLOAT",
            "id": "945acd1e82ed2178b7937215f6f82c814abfa967ec7da545e0a8c776759a37f",
            "resource_type": "aggregator",
            "namespace": "cortex",
        },
        "cortex.stddev": {
            "input": {
                "_type": "FLOAT_COLUMN|INT_COLUMN",
                "_min_count": None,
                "_optional": False,
                "_allow_null": False,
                "_default": None,
                "_max_count": None,
            },
            "file_path": "/home/ubuntu/src/github.com/cortexlabs/cortex/pkg/aggregators/aggregators.yaml",
            "impl_key": "aggregators/b8fa468e54c55083bf350f8b482c5323bd4bc12dd5fa0d859908ab2829aea7f.py",
            "path": "spark/stddev.py",
            "name": "stddev",
            "index": 18,
            "embed": None,
            "output_type": "FLOAT",
            "id": "5b076c542b7e8ad7ebd57c1bedad32875ccddccf66bb11c4d87a6058ec765c9",
            "resource_type": "aggregator",
            "namespace": "cortex",
        },
        "cortex.collect_set_int": {
            "input": {
                "_type": "INT_COLUMN",
                "_min_count": None,
                "_optional": False,
                "_allow_null": False,
                "_default": None,
                "_max_count": None,
            },
            "file_path": "/home/ubuntu/src/github.com/cortexlabs/cortex/pkg/aggregators/aggregators.yaml",
            "impl_key": "aggregators/4a26fe7551ea175ae68b998ea12766a8e4ffc6a6763816b141bc84d42275e90.py",
            "path": "spark/collect_set_int.py",
            "name": "collect_set_int",
            "index": 2,
            "embed": None,
            "output_type": ["INT"],
            "id": "d35f3139f033053d7cc923869d15501cab7078c31ca023a32e307edaac35ae3",
            "resource_type": "aggregator",
            "namespace": "cortex",
        },
    },
    "environment": {
        "file_path": "resources/environments.yaml",
        "name": "dev",
        "index": 0,
        "embed": None,
        "limit": {
            "randomize": None,
            "random_seed": None,
            "fraction_of_rows": None,
            "num_rows": None,
        },
        "id": "483b4537be2db30b81be4809ab0c787f65230540b9b6779af7420922d654011",
        "log_level": {"spark": "WARN", "tensorflow": "DEBUG"},
    },
    "aggregates": {
        "charges_stddev": {
            "tags": {},
            "id": "ddacaf489cf1311c12eb898068bbb9f214be66ac789f3f705d6e1c57cdc943a",
            "type": "FLOAT",
            "aggregator": "cortex.stddev",
            "resource_type": "aggregate",
            "aggregator_path": None,
            "input": "\U0001f31d\U0001f31d\U0001f31d\U0001f31d\U0001f31dcharges",
            "embed": None,
            "name": "charges_stddev",
            "file_path": "resources/features.yaml",
            "workload_id": "cs7eodcfv22u5ztm2l8g",
            "compute": {
                "driver_mem_overhead": None,
                "executors": 1,
                "executor_mem": '{"Quantity":"500Mi","UserString":"500Mi"}',
                "driver_cpu": '{"Quantity":"1","UserString":"1"}',
                "mem_overhead_factor": None,
                "executor_mem_overhead": None,
                "driver_mem": '{"Quantity":"500Mi","UserString":"500Mi"}',
                "executor_cpu": '{"Quantity":"1","UserString":"1"}',
            },
            "key": "apps/insurance/data/2019-06-12-19-22-55-936375/483b4537be2db30b81be4809ab0c787f65230540b9b6779af7420922d654011/aggregates/ddacaf489cf1311c12eb898068bbb9f214be66ac789f3f705d6e1c57cdc943a.msgpack",
            "index": 8,
        },
        "charges_mean": {
            "tags": {},
            "id": "c08af633f53a95ace3e71152b00d595bbbbbd282037ee5fd5e708adf1d96b38",
            "type": "FLOAT",
            "aggregator": "cortex.mean",
            "resource_type": "aggregate",
            "aggregator_path": None,
            "input": "\U0001f31d\U0001f31d\U0001f31d\U0001f31d\U0001f31dcharges",
            "embed": None,
            "name": "charges_mean",
            "file_path": "resources/features.yaml",
            "workload_id": "cs7eodcfv22u5ztm2l8g",
            "compute": {
                "driver_mem_overhead": None,
                "executors": 1,
                "executor_mem": '{"Quantity":"500Mi","UserString":"500Mi"}',
                "driver_cpu": '{"Quantity":"1","UserString":"1"}',
                "mem_overhead_factor": None,
                "executor_mem_overhead": None,
                "driver_mem": '{"Quantity":"500Mi","UserString":"500Mi"}',
                "executor_cpu": '{"Quantity":"1","UserString":"1"}',
            },
            "key": "apps/insurance/data/2019-06-12-19-22-55-936375/483b4537be2db30b81be4809ab0c787f65230540b9b6779af7420922d654011/aggregates/c08af633f53a95ace3e71152b00d595bbbbbd282037ee5fd5e708adf1d96b38.msgpack",
            "index": 7,
        },
        "children_set": {
            "tags": {},
            "id": "800ae506a9af394af56ae5fd7727801eed39a79f0a7bb3bcb58d5722953c748",
            "type": ["INT"],
            "aggregator": "cortex.collect_set_int",
            "resource_type": "aggregate",
            "aggregator_path": None,
            "input": "\U0001f31d\U0001f31d\U0001f31d\U0001f31d\U0001f31dchildren",
            "embed": None,
            "name": "children_set",
            "file_path": "resources/features.yaml",
            "workload_id": "cs7eodcfv22u5ztm2l8g",
            "compute": {
                "driver_mem_overhead": None,
                "executors": 1,
                "executor_mem": '{"Quantity":"500Mi","UserString":"500Mi"}',
                "driver_cpu": '{"Quantity":"1","UserString":"1"}',
                "mem_overhead_factor": None,
                "executor_mem_overhead": None,
                "driver_mem": '{"Quantity":"500Mi","UserString":"500Mi"}',
                "executor_cpu": '{"Quantity":"1","UserString":"1"}',
            },
            "key": "apps/insurance/data/2019-06-12-19-22-55-936375/483b4537be2db30b81be4809ab0c787f65230540b9b6779af7420922d654011/aggregates/800ae506a9af394af56ae5fd7727801eed39a79f0a7bb3bcb58d5722953c748.msgpack",
            "index": 9,
        },
    },
    "app": {
        "name": "insurance",
        "id": "64e8937abc6d71cf2d2f0fe05e52c33666883443ae4e8af7924c71198caa1f9",
    },
    "raw_dataset": {
        "key": "apps/insurance/data/2019-06-12-19-22-55-936375/483b4537be2db30b81be4809ab0c787f65230540b9b6779af7420922d654011/data_raw/raw.parquet"
    },
    "dataset_version": "2019-06-12-19-22-55-936375",
    "transformers": {
        "cortex.normalize": {
            "input": {
                "_type": {
                    "col": {
                        "_type": "FLOAT_COLUMN|INT_COLUMN",
                        "_min_count": None,
                        "_optional": False,
                        "_allow_null": False,
                        "_default": None,
                        "_max_count": None,
                    },
                    "stddev": {
                        "_type": "INT|FLOAT",
                        "_min_count": None,
                        "_optional": False,
                        "_allow_null": False,
                        "_default": None,
                        "_max_count": None,
                    },
                    "mean": {
                        "_type": "INT|FLOAT",
                        "_min_count": None,
                        "_optional": False,
                        "_allow_null": False,
                        "_default": None,
                        "_max_count": None,
                    },
                },
                "_min_count": None,
                "_optional": False,
                "_allow_null": False,
                "_default": None,
                "_max_count": None,
            },
            "file_path": "/home/ubuntu/src/github.com/cortexlabs/cortex/pkg/transformers/transformers.yaml",
            "impl_key": "/transformers/normalize.py",
            "path": "normalize.py",
            "name": "normalize",
            "index": 1,
            "embed": None,
            "output_type": "FLOAT_COLUMN",
            "id": "0dcf14b7b6208633b8805b29eb564f860736a07691176095fd4f19aa5ef75ab",
            "resource_type": "transformer",
            "namespace": "cortex",
        }
    },
    "models": {
        "dnn": {
            "training_input": None,
            "data_partition_ratio": {"evaluation": 0.2, "training": 0.8},
            "dataset_compute": {
                "driver_mem_overhead": None,
                "executors": 1,
                "executor_mem": '{"Quantity":"500Mi","UserString":"500Mi"}',
                "driver_cpu": '{"Quantity":"1","UserString":"1"}',
                "mem_overhead_factor": None,
                "executor_mem_overhead": None,
                "driver_mem": '{"Quantity":"500Mi","UserString":"500Mi"}',
                "executor_cpu": '{"Quantity":"1","UserString":"1"}',
            },
            "training": {
                "tf_random_seed": 1788,
                "keep_checkpoint_every_n_hours": 10000,
                "num_steps": 10000,
                "keep_checkpoint_max": 3,
                "log_step_count_steps": 100,
                "save_checkpoints_steps": None,
                "num_epochs": None,
                "save_summary_steps": 100,
                "batch_size": 40,
                "save_checkpoints_secs": 600,
                "tf_randomize_seed": False,
                "shuffle": True,
            },
            "input": {
                "features": [
                    "\U0001f31d\U0001f31d\U0001f31d\U0001f31d\U0001f31dage",
                    "\U0001f31d\U0001f31d\U0001f31d\U0001f31d\U0001f31dsex",
                    "\U0001f31d\U0001f31d\U0001f31d\U0001f31d\U0001f31dbmi",
                    "\U0001f31d\U0001f31d\U0001f31d\U0001f31d\U0001f31dchildren",
                    "\U0001f31d\U0001f31d\U0001f31d\U0001f31d\U0001f31dsmoker",
                    "\U0001f31d\U0001f31d\U0001f31d\U0001f31d\U0001f31dregion",
                ],
                "aggregates": {
                    "region_vocab": ["northwest", "northeast", "southwest", "southeast"],
                    "smoker_vocab": ["yes", "no"],
                    "children_set": "\U0001f31d\U0001f31d\U0001f31d\U0001f31d\U0001f31dchildren_set",
                    "sex_vocab": ["female", "male"],
                    "age_buckets": [15, 20, 25, 35, 40, 45, 50, 55, 60, 65],
                    "bmi_buckets": [15, 20, 25, 35, 40, 45, 50, 55],
                },
            },
            "target_column": "\U0001f31d\U0001f31d\U0001f31d\U0001f31d\U0001f31dcharges_normalized",
            "embed": None,
            "hparams": {"hidden_units": [100, 100, 100]},
            "workload_id": "gj4bdao7ocrfa1xbls9y",
            "file_path": "resources/models.yaml",
            "evaluation": {
                "throttle_secs": 600,
                "start_delay_secs": 120,
                "batch_size": 40,
                "num_epochs": None,
                "shuffle": False,
                "num_steps": 100,
            },
            "estimator_path": "implementations/models/dnn.py",
            "dataset": {
                "file_path": "resources/models.yaml",
                "model_name": "dnn",
                "workload_id": "cs7eodcfv22u5ztm2l8g",
                "name": "dnn/training_dataset",
                "index": 0,
                "embed": None,
                "train_key": "apps/insurance/data/2019-06-12-19-22-55-936375/483b4537be2db30b81be4809ab0c787f65230540b9b6779af7420922d654011/data_training/1020431bc033a0aa2cc427349486b7636f2b0bb65e75553811fea82b9fa12fd/train.tfrecord",
                "id": "1020431bc033a0aa2cc427349486b7636f2b0bb65e75553811fea82b9fa12fd",
                "resource_type": "training_dataset",
                "eval_key": "apps/insurance/data/2019-06-12-19-22-55-936375/483b4537be2db30b81be4809ab0c787f65230540b9b6779af7420922d654011/data_training/1020431bc033a0aa2cc427349486b7636f2b0bb65e75553811fea82b9fa12fd/eval.tfrecord",
            },
            "id": "4145945c21c9f9fd616e666fef2b61aa501e8db15e756e9dcd2f2e3ec47575e",
            "index": 0,
            "resource_type": "model",
            "tags": {},
            "prediction_key": "",
            "name": "dnn",
            "estimator": "c5e53f81d6d57bd1b46ed04020509401b139864d483c35e781338f11b2cc301",
            "compute": {"gpu": None, "cpu": None, "mem": None},
            "key": "apps/insurance/data/2019-06-12-19-22-55-936375/483b4537be2db30b81be4809ab0c787f65230540b9b6779af7420922d654011/models/4145945c21c9f9fd616e666fef2b61aa501e8db15e756e9dcd2f2e3ec47575e.zip",
        }
    },
}
